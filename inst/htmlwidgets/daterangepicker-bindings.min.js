var DateRangePickerBinding=new Shiny.InputBinding;$.extend(DateRangePickerBinding,{find:function(e){return $(e).find(".daterangepickerclass")},initialize:function(e){var n=JSON.parse(e.attributes.options.value);if(void 0!==n.language&&null!==n.language&&moment.locale(n.language),void 0!==n.ranges||null!==n.ranges)for(var a in n.ranges)if("string"==typeof n.ranges[a])n.ranges[a]=[moment(n.ranges[a]),moment(n.ranges[a])];else for(var t in[0,1])n.ranges[a].push(moment(n.ranges[a][0])),n.ranges[a].shift();$(e).daterangepicker({parentEl:n.parentEl?n.parentEl:"body",startDate:!!n.start&&moment(n.start),endDate:!!n.end&&moment(n.end),minDate:!!n.minDate&&moment(n.minDate),maxDate:!!n.maxDate&&moment(n.maxDate),maxSpan:!!n.maxSpan&&n.maxSpan,autoApply:void 0!==n.autoApply&&n.autoApply,singleDatePicker:void 0!==n.singleDatePicker&&n.singleDatePicker,showDropdowns:void 0!==n.showDropdowns&&n.showDropdowns,minYear:n.minYear?n.minYear:moment().subtract(100,"year").format("YYYY"),maxYear:n.maxYear?n.maxYear:moment().add(100,"year").format("YYYY"),showWeekNumbers:void 0!==n.showWeekNumbers&&n.showWeekNumbers,showISOWeekNumbers:void 0!==n.showISOWeekNumbers&&n.showISOWeekNumbers,showCustomRangeLabel:void 0===n.showCustomRangeLabel||n.showCustomRangeLabel,timePicker:void 0!==n.timePicker&&n.timePicker,timePicker24Hour:void 0!==n.timePicker24Hour&&n.timePicker24Hour,timePickerIncrement:n.timePickerIncrement?n.timePickerIncrement:1,timePickerSeconds:void 0!==n.timePickerSeconds&&n.timePickerSeconds,linkedCalendars:void 0===n.linkedCalendars||n.linkedCalendars,autoUpdateInput:!n.autoUpdateInput||n.autoUpdateInput,alwaysShowCalendars:void 0!==n.alwaysShowCalendars&&n.alwaysShowCalendars,ranges:n.ranges?n.ranges:void 0,opens:n.opens?n.opens:"right",drops:n.drops?n.drops:"down",buttonClasses:n.buttonClasses?n.buttonClasses:"btn btn-sm",applyButtonClasses:n.applyButtonClasses?n.applyButtonClasses:"btn-primary",cancelButtonClasses:n.cancelButtonClasses?n.cancelButtonClasses:"btn-default",locale:n.locale?n.locale:{format:"Y-MM-DD"},isInvalidDate:n.isInvalidDate?n.isInvalidDate:void 0,isCustomDate:n.isCustomDate?n.isCustomDate:void 0})},getValue:function(e){var n,a;return n=$(e).data("daterangepicker").startDate,a=$(e).data("daterangepicker").endDate,!0===$(e).data("daterangepicker").timePicker?{format:"POSIX",start:n.unix(),end:a.unix()}:{format:"DATE",start:n.format("YYYY-MM-DD"),end:a.format("YYYY-MM-DD")}},getType:function(e){return"DateRangePickerBinding"},subscribe:function(e,n){$(e).on("show.daterangepicker",function(e){n()}),$(e).on("hide.daterangepicker",function(e){n()}),$(e).on("showCalendar.daterangepicker",function(e){n()}),$(e).on("hideCalendar.daterangepicker",function(e){n()}),$(e).on("apply.daterangepicker",function(e){n()}),$(e).on("cancel.daterangepicker",function(e){var a=JSON.parse(this.attributes.options.nodeValue);void 0!==a.cancelIsClear&&a.cancelIsClear?$(this).val(""):n()}),$(e).on("change.daterangepicker",function(e){n()})},unsubscribe:function(e){$(e).off(".DateRangePickerBinding")},receiveMessage:function(e,n){var a=$("#"+n.id).data("daterangepicker");if(n.hasOwnProperty("start")&&a.setStartDate(moment(n.start)),n.hasOwnProperty("end")&&a.setEndDate(moment(n.end)),n.hasOwnProperty("icon")){var t=$(e).parent().find("i")[0];void 0!==t?t.className=n.icon.attribs.class:(Shiny.renderDependencies(n.icon.htmldeps),$(e).before(' <i class="'+n.icon.attribs.class+'"></i>'))}if(n.hasOwnProperty("label")){var o=$(e).parent().find('label[for="'+n.id+'"]');0!==o.length?o.text(n.label):$(e).before('<label class="control-label" for="'+e.id+'">'+n.label+"</label>")}n.hasOwnProperty("minDate")&&(a.minDate=moment(n.minDate)),n.hasOwnProperty("maxDate")&&(a.maxDate=moment(n.maxDate)),n.hasOwnProperty("options")&&(n.options.hasOwnProperty("minYear")&&(a.minYear=n.options.minYear),n.options.hasOwnProperty("maxYear")&&(a.maxYear=n.options.maxYear),n.options.hasOwnProperty("showDropdowns")&&(a.showDropdowns=n.options.showDropdowns),n.options.hasOwnProperty("showCustomRangeLabel")&&(a.showCustomRangeLabel=n.options.showCustomRangeLabel),n.options.hasOwnProperty("opens")&&(a.opens=n.options.opens),n.options.hasOwnProperty("drops")&&(a.drops=n.options.drops),n.options.hasOwnProperty("timePicker")&&(a.timePicker=n.options.timePicker),n.options.hasOwnProperty("timePickerIncrement")&&(a.timePickerIncrement=n.options.timePickerIncrement),n.options.hasOwnProperty("timePicker24Hour")&&(a.timePicker24Hour=n.options.timePicker24Hour),n.options.hasOwnProperty("timePickerSeconds")&&(a.timePickerSeconds=n.options.timePickerSeconds),n.options.hasOwnProperty("showWeekNumbers")&&(a.showWeekNumbers=n.options.showWeekNumbers),n.options.hasOwnProperty("showISOWeekNumbers")&&(a.showISOWeekNumbers=n.options.showISOWeekNumbers),n.options.hasOwnProperty("parentEl")&&(a.parentEl=n.options.parentEl),n.options.hasOwnProperty("maxSpan")&&(a.maxSpan=n.options.maxSpan),n.options.hasOwnProperty("alwaysShowCalendars")&&(a.alwaysShowCalendars=n.options.alwaysShowCalendars),n.options.hasOwnProperty("buttonClasses")&&(a.buttonClasses=n.options.buttonClasses),n.options.hasOwnProperty("applyButtonClasses")&&(a.applyButtonClasses=n.options.applyButtonClasses),n.options.hasOwnProperty("cancelButtonClasses")&&(a.cancelButtonClasses=n.options.cancelButtonClasses),n.options.hasOwnProperty("autoUpdateInput")&&(a.autoUpdateInput=n.options.autoUpdateInput),n.options.hasOwnProperty("autoApply")&&(a.autoApply=n.options.autoApply),n.options.hasOwnProperty("linkedCalendars")&&(a.linkedCalendars=n.options.linkedCalendars))}}),Shiny.inputBindings.register(DateRangePickerBinding);